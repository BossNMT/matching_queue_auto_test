# Matching Page - Documentation

## üìÑ T·ªïng quan

**File:** `src/pages/matching.page.js`  
**Test File:** `src/e2e/matching.spec.js`  
**Test Coverage:** 4 test cases

Matching Page cho ph√©p ng∆∞·ªùi d√πng t·∫°o tr·∫≠n ƒë·∫•u (match) v√† qu·∫£n l√Ω c√°c tr·∫≠n ƒë·∫•u ƒë√£ t·∫°o, bao g·ªìm ch·ªçn CLB, s√¢n b√≥ng, ng√†y gi·ªù, li√™n h·ªá v√† m√¥ t·∫£.

## üèóÔ∏è C·∫•u tr√∫c Page Object

### Constructor & Selectors

```javascript
export class MatchingPage extends BasePage {
  constructor(page) {
    super(page);

    this.selectors = {
      // Create form
      pageTitle: SELECTORS.MATCHING.PAGE_TITLE,
      createMatchButton: SELECTORS.MATCHING.CREATE_MATCH_BUTTON,
      clubSelect: SELECTORS.MATCHING.CLUB_SELECT,
      clubSelectLabel: SELECTORS.MATCHING.CLUB_SELECT_LABEL,
      clubSelectOption: SELECTORS.MATCHING.CLUB_SELECT_OPTION,
      stadiumSelect: SELECTORS.MATCHING.STADIUM_SELECT,
      stadiumSelectLabel: SELECTORS.MATCHING.STADIUM_SELECT_LABEL,
      stadiumSelectOption: SELECTORS.MATCHING.STADIUM_SELECT_OPTION,
      dateInput: SELECTORS.MATCHING.DATE_INPUT,
      dateButton: SELECTORS.MATCHING.DATE_BUTTON,
      timeInput: SELECTORS.MATCHING.TIME_INPUT,
      timeButton: SELECTORS.MATCHING.TIME_BUTTON,
      contactInput: SELECTORS.MATCHING.CONTACT_INPUT,
      descriptionInput: SELECTORS.MATCHING.DESCRIPTION_INPUT,
      submitButton: SELECTORS.MATCHING.SUBMIT_BUTTON,
      errorMessage: SELECTORS.MATCHING.ERROR_MESSAGE,
      successMessage: SELECTORS.MATCHING.SUCCESS_MESSAGE,
      
      // Manage page selectors
      managePageTitle: SELECTORS.MATCHING.MANAGE_PAGE_TITLE,
      manageTable: SELECTORS.MATCHING.MANAGE_TABLE,
      manageTableBody: SELECTORS.MATCHING.MANAGE_TABLE_BODY,
      manageTableRow: SELECTORS.MATCHING.MANAGE_TABLE_ROW,
      cancelMatchButton: SELECTORS.MATCHING.CANCEL_MATCH_BUTTON,
      
      // Legacy list selectors
      matchList: SELECTORS.MATCHING.MATCH_LIST,
      matchItem: SELECTORS.MATCHING.MATCH_ITEM,
      matchTitle: SELECTORS.MATCHING.MATCH_TITLE,
      matchStadium: SELECTORS.MATCHING.MATCH_STADIUM,
      matchTime: SELECTORS.MATCHING.MATCH_TIME,
    };
  }
}
```

## üîë Methods quan tr·ªçng

### Navigation Methods

#### `navigate()`
ƒêi·ªÅu h∆∞·ªõng ƒë·∫øn trang matching list.

```javascript
async navigate() {
  info('Navigating to Matching page');
  await this.goto(`${ENV.BASE_URL}${ROUTES.MATCHING}`);
  await this.waitForPageLoaded();
}
```

**Route:** `/matching` (ROUTES.MATCHING)

#### `navigateToCreatePage()`
ƒêi·ªÅu h∆∞·ªõng ƒë·∫øn trang t·∫°o tr·∫≠n ƒë·∫•u.

```javascript
async navigateToCreatePage() {
  info('Navigating to Create Matching page');
  await this.goto(`${ENV.BASE_URL}${ROUTES.MATCHING_CREATE}`);
  await this.waitForCreatePageLoaded();
}
```

**Route:** `/matching/create` (ROUTES.MATCHING_CREATE)

**Use case:** TC01, TC02, TC03 - T·∫°o tr·∫≠n ƒë·∫•u.

#### `navigateToManagePage()`
ƒêi·ªÅu h∆∞·ªõng ƒë·∫øn trang qu·∫£n l√Ω tr·∫≠n ƒë·∫•u.

```javascript
async navigateToManagePage() {
  info('Navigating to Manage Matches page');
  await this.goto(`${ENV.BASE_URL}${ROUTES.MATCHING_MANAGE}`);
  await this.page.waitForLoadState('networkidle');
}
```

**Route:** `/matching/manage` (ROUTES.MATCHING_MANAGE)

**Use case:** TC04 - Qu·∫£n l√Ω tr·∫≠n ƒë·∫•u.

### Form Display Methods

#### `isFormDisplayed()`
Ki·ªÉm tra form t·∫°o tr·∫≠n ƒë·∫•u c√≥ hi·ªÉn th·ªã ƒë·∫ßy ƒë·ªß c√°c tr∆∞·ªùng kh√¥ng.

```javascript
async isFormDisplayed() {
  debug('Checking if create match form is displayed');
  try {
    await this.page.waitForSelector(this.selectors.clubSelect, { timeout: 5000 });
    await this.page.waitForSelector(this.selectors.stadiumSelect, { timeout: 5000 });
    await this.page.waitForSelector(this.selectors.dateInput, { timeout: 5000 });
    await this.page.waitForSelector(this.selectors.timeInput, { timeout: 5000 });
    await this.page.waitForSelector(this.selectors.contactInput, { timeout: 5000 });
    await this.page.waitForSelector(this.selectors.descriptionInput, { timeout: 5000 });
    await this.page.waitForSelector(this.selectors.submitButton, { timeout: 5000 });
    return true;
  } catch (error) {
    debug(`Form not fully displayed: ${error.message}`);
    return false;
  }
}
```

**Return:** `boolean` - true n·∫øu t·∫•t c·∫£ 7 tr∆∞·ªùng hi·ªÉn th·ªã.

**Use case:** TC01 - Verify form hi·ªÉn th·ªã ƒë·∫ßy ƒë·ªß.

### Form Input Methods

#### `selectClub(clubName)`
Ch·ªçn c√¢u l·∫°c b·ªô t·ª´ dropdown.

```javascript
async selectClub(clubName) {
  info(`Selecting club: ${clubName}`);
  await this.page.click(this.selectors.clubSelect);
  await this.page.waitForTimeout(500);
  await this.page.click(`${this.selectors.clubSelectOption}:has-text("${clubName}")`);
  await this.page.waitForTimeout(300);
}
```

**Parameters:**
- `clubName` - T√™n CLB (string), v√≠ d·ª•: "Arsenal FC"

**Use case:** TC02 - T·∫°o tr·∫≠n v·ªõi CLB.

#### `selectStadium(stadiumName)`
Ch·ªçn s√¢n b√≥ng t·ª´ dropdown.

```javascript
async selectStadium(stadiumName) {
  info(`Selecting stadium: ${stadiumName}`);
  await this.page.click(this.selectors.stadiumSelect);
  await this.page.waitForTimeout(500);
  await this.page.click(`${this.selectors.stadiumSelectOption}:has-text("${stadiumName}")`);
  await this.page.waitForTimeout(300);
}
```

**Parameters:**
- `stadiumName` - T√™n s√¢n b√≥ng, v√≠ d·ª•: "S√¢n V·∫≠n ƒê·ªông A"

#### `fillDate(date)`
Nh·∫≠p ng√†y thi ƒë·∫•u.

```javascript
async fillDate(date) {
  info(`Filling date: ${date}`);
  await this.fill(this.selectors.dateInput, date);
}
```

**Parameters:**
- `date` - Ng√†y (string), format: "2025-12-31"

#### `fillTime(time)`
Nh·∫≠p gi·ªù thi ƒë·∫•u.

```javascript
async fillTime(time) {
  info(`Filling time: ${time}`);
  await this.fill(this.selectors.timeInput, time);
}
```

**Parameters:**
- `time` - Gi·ªù (string), format: "14:00"

#### `fillContactNumber(contactNumber)`
Nh·∫≠p s·ªë ƒëi·ªán tho·∫°i li√™n h·ªá.

```javascript
async fillContactNumber(contactNumber) {
  info(`Filling contact number: ${contactNumber}`);
  await this.fill(this.selectors.contactInput, contactNumber);
}
```

**Parameters:**
- `contactNumber` - S·ªë ƒëi·ªán tho·∫°i, v√≠ d·ª•: "0912345678"

#### `fillDescription(description)`
Nh·∫≠p m√¥ t·∫£ tr·∫≠n ƒë·∫•u.

```javascript
async fillDescription(description) {
  info(`Filling description: ${description}`);
  await this.fill(this.selectors.descriptionInput, description);
}
```

**Parameters:**
- `description` - M√¥ t·∫£ (string)

### Submit Methods

#### `clickSubmitButton()`
Click n√∫t "T·∫°o" ƒë·ªÉ submit form.

```javascript
async clickSubmitButton() {
  info('Clicking submit button');
  await this.click(this.selectors.submitButton);
}
```

#### `createMatch(matchData)`
Method t·ªïng h·ª£p: t·∫°o tr·∫≠n ƒë·∫•u v·ªõi ƒë·∫ßy ƒë·ªß th√¥ng tin.

```javascript
async createMatch(matchData) {
  info('Creating match with data:', matchData);
  
  if (matchData.club) {
    await this.selectClub(matchData.club);
  }
  
  if (matchData.stadium) {
    await this.selectStadium(matchData.stadium);
  }
  
  if (matchData.date) {
    await this.fillDate(matchData.date);
  }
  
  if (matchData.time) {
    await this.fillTime(matchData.time);
  }
  
  if (matchData.contactNumber) {
    await this.fillContactNumber(matchData.contactNumber);
  }
  
  if (matchData.description) {
    await this.fillDescription(matchData.description);
  }
  
  await this.clickSubmitButton();
}
```

**Parameters:**
- `matchData` - Object ch·ª©a th√¥ng tin tr·∫≠n ƒë·∫•u
  - `club` (optional) - T√™n CLB
  - `stadium` (optional) - T√™n s√¢n
  - `date` (optional) - Ng√†y thi ƒë·∫•u
  - `time` (optional) - Gi·ªù thi ƒë·∫•u
  - `contactNumber` (optional) - SƒêT li√™n h·ªá
  - `description` (optional) - M√¥ t·∫£

**Use case:** TC02 - T·∫°o tr·∫≠n th√†nh c√¥ng.

### Error & Success Message Methods

#### `getErrorMessage()`
L·∫•y error message ƒë·∫ßu ti√™n.

```javascript
async getErrorMessage() {
  debug('Getting error message');
  try {
    const errorElement = await this.page.locator(this.selectors.errorMessage).first();
    const isVisible = await errorElement.isVisible({ timeout: 3000 });
    if (isVisible) {
      return await errorElement.textContent();
    }
    return null;
  } catch (error) {
    return null;
  }
}
```

**Return:** `string | null`

#### `getAllErrorMessages()`
L·∫•y t·∫•t c·∫£ error messages t·ª´ form validation.

```javascript
async getAllErrorMessages() {
  debug('Getting all error messages from form validation');
  try {
    // ƒê·ª£i form validation trigger (sau khi submit)
    await this.page.waitForTimeout(1000);
    
    const errorElements = await this.page.locator(this.selectors.errorMessage).all();
    const messages = [];
    
    for (const element of errorElements) {
      try {
        const isVisible = await element.isVisible({ timeout: 500 });
        if (isVisible) {
          const text = await element.textContent();
          // Filter: ch·ªâ l·∫•y text c√≥ n·ªôi dung h·ª£p l·ªá (kh√¥ng ph·∫£i placeholder, label, etc.)
          if (text && text.trim() && text.trim().length > 5) {
            messages.push(text.trim());
            debug(`  - Found error: "${text.trim()}"`);
          }
        }
      } catch (e) {
        // Element kh√¥ng visible ho·∫∑c kh√¥ng t·ªìn t·∫°i, skip
      }
    }
    
    debug(`Total error messages found: ${messages.length}`);
    return messages;
  } catch (error) {
    debug('Error in getAllErrorMessages:', error);
    return [];
  }
}
```

**Return:** `Array<string>` - M·∫£ng c√°c error messages.

**Use case:** TC03 - Ki·ªÉm tra validation khi thi·∫øu th√¥ng tin.

**Important:** Method n√†y filter messages, ch·ªâ l·∫•y text length > 5 ƒë·ªÉ lo·∫°i b·ªè placeholder/label.

#### `getSuccessMessage()`
L·∫•y success message sau khi t·∫°o tr·∫≠n th√†nh c√¥ng.

```javascript
async getSuccessMessage() {
  debug('Getting success message');
  try {
    const successElement = await this.page.locator(this.selectors.successMessage).first();
    await successElement.waitFor({ state: 'visible', timeout: 5000 });
    return await successElement.textContent();
  } catch (error) {
    return null;
  }
}
```

**Return:** `string | null`

### Match List Methods

#### `isMatchInList(stadiumName)`
Ki·ªÉm tra tr·∫≠n ƒë·∫•u c√≥ trong danh s√°ch kh√¥ng (search by stadium name).

```javascript
async isMatchInList(stadiumName) {
  info(`Checking if match with stadium "${stadiumName}" is in list`);
  try {
    const matchElement = await this.page.locator(`text="${stadiumName}"`).first();
    return await matchElement.isVisible({ timeout: 5000 });
  } catch (error) {
    return false;
  }
}
```

**Parameters:**
- `stadiumName` - T√™n s√¢n ƒë·ªÉ t√¨m

**Return:** `boolean`

**Use case:** TC02 - Verify tr·∫≠n xu·∫•t hi·ªán trong danh s√°ch.

### Manage Page Methods

#### `isManagePageDisplayed()`
Ki·ªÉm tra trang "Qu·∫£n l√Ω tr·∫≠n b√≥ng" c√≥ hi·ªÉn th·ªã ƒë√∫ng kh√¥ng.

```javascript
async isManagePageDisplayed() {
  debug('Checking if manage page is displayed');
  try {
    const title = await this.page.locator(this.selectors.managePageTitle);
    await title.waitFor({ state: 'visible', timeout: 5000 });
    return true;
  } catch (error) {
    debug('Manage page title not found:', error);
    return false;
  }
}
```

**Return:** `boolean`

**Use case:** TC04 - Verify trang qu·∫£n l√Ω hi·ªÉn th·ªã.

#### `getMatchCount()`
L·∫•y s·ªë l∆∞·ª£ng tr·∫≠n ƒë·∫•u trong b·∫£ng qu·∫£n l√Ω.

```javascript
async getMatchCount() {
  debug('Getting match count from manage table');
  try {
    await this.page.waitForTimeout(1000); // ƒê·ª£i table load
    const rows = await this.page.locator(this.selectors.manageTableRow).all();
    debug(`Found ${rows.length} matches in table`);
    return rows.length;
  } catch (error) {
    debug('Error getting match count:', error);
    return 0;
  }
}
```

**Return:** `number` - S·ªë l∆∞·ª£ng tr·∫≠n ƒë·∫•u.

**Use case:** TC04 - Verify c√≥ tr·∫≠n ƒë·∫•u trong table.

#### `hasCancelButton()`
Ki·ªÉm tra c√≥ n√∫t "H·ªßy tr·∫≠n" kh√¥ng (ƒë·ªÉ verify c√≥ th·ªÉ qu·∫£n l√Ω).

```javascript
async hasCancelButton() {
  debug('Checking if cancel button exists');
  try {
    const cancelBtn = await this.page.locator(this.selectors.cancelMatchButton).first();
    const isVisible = await cancelBtn.isVisible({ timeout: 3000 });
    debug(`Cancel button visible: ${isVisible}`);
    return isVisible;
  } catch (error) {
    debug('Cancel button not found:', error);
    return false;
  }
}
```

**Return:** `boolean`

**Use case:** TC04 - Verify c√≥ n√∫t h·ªßy tr·∫≠n.

#### `getMatchInfoAtRow(rowIndex)`
L·∫•y th√¥ng tin tr·∫≠n ƒë·∫•u t·∫°i row index (0-based).

```javascript
async getMatchInfoAtRow(rowIndex) {
  debug(`Getting match info at row ${rowIndex}`);
  try {
    const row = await this.page.locator(this.selectors.manageTableRow).nth(rowIndex);
    const cells = await row.locator('th, td').all();
    
    if (cells.length >= 5) {
      const info = {
        stt: await cells[0].textContent(),
        teamName: await cells[1].textContent(),
        stadium: await cells[2].textContent(),
        time: await cells[3].textContent(),
      };
      debug('Match info:', info);
      return info;
    }
    return null;
  } catch (error) {
    debug('Error getting match info:', error);
    return null;
  }
}
```

**Return:** `Object | null` - `{ stt, teamName, stadium, time }`

**Use case:** TC04 - L·∫•y info tr·∫≠n ƒë·∫ßu ti√™n.

## üß™ Test Cases (4 TCs)

### TC01 - M·ªü form "T·∫°o tr·∫≠n b√≥ng"
**M·ª•c ƒë√≠ch:** Ki·ªÉm tra form t·∫°o tr·∫≠n hi·ªÉn th·ªã ƒë·∫ßy ƒë·ªß c√°c tr∆∞·ªùng.

**Logic:**
1. Ch·ªçn "C·∫∑p k√®o - T√¨m ƒë·ªëi"
2. Nh·∫•n "T·∫°o tr·∫≠n b√≥ng" (ho·∫∑c navigate tr·ª±c ti·∫øp)
3. Verify form hi·ªÉn th·ªã ƒë·∫ßy ƒë·ªß 7 tr∆∞·ªùng:
   - C√¢u l·∫°c b·ªô (dropdown)
   - S√¢n b√≥ng (dropdown)
   - Ng√†y thi ƒë·∫•u (date input)
   - Gi·ªù thi ƒë·∫•u (time input)
   - S·ªë ƒëi·ªán tho·∫°i li√™n h·ªá (text input)
   - M√¥ t·∫£ (textarea)
   - N√∫t "T·∫°o" (submit button)

```javascript
test('TC01 - M·ªü form "T·∫°o tr·∫≠n b√≥ng" - Ki·ªÉm tra hi·ªÉn th·ªã form t·∫°o tr·∫≠n', async () => {
  // 1. Ch·ªçn "C·∫∑p k√®o - T√¨m ƒë·ªëi"
  await matchingPage.navigate();
  
  // 2. Nh·∫•n "T·∫°o tr·∫≠n b√≥ng" (ho·∫∑c ƒëi·ªÅu h∆∞·ªõng tr·ª±c ti·∫øp ƒë·∫øn trang t·∫°o tr·∫≠n)
  await matchingPage.navigateToCreatePage();
  
  // Verify: Form hi·ªÉn th·ªã ƒë·∫ßy ƒë·ªß c√°c tr∆∞·ªùng nh·∫≠p
  const isFormDisplayed = await matchingPage.isFormDisplayed();
  expect(isFormDisplayed).toBeTruthy();
  
  // Ki·ªÉm tra t·ª´ng tr∆∞·ªùng c√≥ hi·ªÉn th·ªã
  await expect(page.locator(matchingPage.selectors.clubSelect)).toBeVisible();
  await expect(page.locator(matchingPage.selectors.stadiumSelect)).toBeVisible();
  await expect(page.locator(matchingPage.selectors.dateInput)).toBeVisible();
  await expect(page.locator(matchingPage.selectors.timeInput)).toBeVisible();
  await expect(page.locator(matchingPage.selectors.contactInput)).toBeVisible();
  await expect(page.locator(matchingPage.selectors.descriptionInput)).toBeVisible();
  await expect(page.locator(matchingPage.selectors.submitButton)).toBeVisible();
});
```

**Expectations:**
- ‚úÖ Form hi·ªÉn th·ªã ƒë·∫ßy ƒë·ªß 7 tr∆∞·ªùng
- ‚úÖ T·∫•t c·∫£ tr∆∞·ªùng ƒë·ªÅu visible

### TC02 - T·∫°o tr·∫≠n b√≥ng h·ª£p l·ªá
**M·ª•c ƒë√≠ch:** Ki·ªÉm tra t·∫°o tr·∫≠n ƒë·∫•u th√†nh c√¥ng v·ªõi th√¥ng tin h·ª£p l·ªá.

**Logic:**
1. Navigate ƒë·∫øn create page
2. Nh·∫≠p ƒë·∫ßy ƒë·ªß th√¥ng tin:
   - Club: "Arsenal FC"
   - Stadium: "S√¢n V·∫≠n ƒê·ªông A"
   - Date: "2025-12-31"
   - Time: "14:00"
   - Contact: "0912345678"
   - Description: "Tr·∫≠n giao h·ªØu cu·ªëi tu·∫ßn"
3. Click "T·∫°o"
4. ƒê·ª£i 2 gi√¢y
5. Verify tr·∫≠n t·∫°o th√†nh c√¥ng:
   - URL chuy·ªÉn v·ªÅ `/matching` HO·∫∂C c√≥ success message
   - Tr·∫≠n hi·ªÉn th·ªã trong danh s√°ch (n·∫øu redirect)

```javascript
test('TC02 - T·∫°o tr·∫≠n b√≥ng h·ª£p l·ªá - Ki·ªÉm tra t·∫°o tr·∫≠n th√†nh c√¥ng', async () => {
  // Navigate to create page
  await matchingPage.navigateToCreatePage();
  
  // 1. Nh·∫≠p ƒë·∫ßy ƒë·ªß th√¥ng tin tr·∫≠n
  const matchData = MATCHING_TEST_DATA.VALID_MATCH;
  
  // 2. Nh·∫•n "T·∫°o"
  await matchingPage.createMatch(matchData);
  
  // Verify: Tr·∫≠n b√≥ng t·∫°o th√†nh c√¥ng
  // C√≥ th·ªÉ ki·ªÉm tra th√¥ng b√°o th√†nh c√¥ng ho·∫∑c redirect v·ªÅ trang danh s√°ch
  await page.waitForTimeout(2000);
  
  // Ki·ªÉm tra c√≥ redirect ho·∫∑c c√≥ th√¥ng b√°o th√†nh c√¥ng
  const currentUrl = page.url();
  const isSuccess = currentUrl.includes('/matching') || 
                   (await matchingPage.getSuccessMessage()) !== null;
  expect(isSuccess).toBeTruthy();
  
  // Verify: Hi·ªÉn th·ªã trong danh s√°ch (n·∫øu redirect v·ªÅ trang matching)
  if (currentUrl.includes('/matching') && !currentUrl.includes('/create')) {
    const isInList = await matchingPage.isMatchInList(MATCHING_TEST_DATA.STADIUMS.SVD_A);
    expect(isInList).toBeTruthy();
  }
});
```

**Test Data:**
```javascript
MATCHING_TEST_DATA.VALID_MATCH = {
  club: 'Arsenal FC',
  stadium: 'S√¢n V·∫≠n ƒê·ªông A',
  date: '2025-12-31',
  time: '14:00',
  contactNumber: '0912345678',
  description: 'Tr·∫≠n giao h·ªØu cu·ªëi tu·∫ßn'
}
```

**Expectations:**
- ‚úÖ T·∫°o tr·∫≠n th√†nh c√¥ng (success message ho·∫∑c redirect)
- ‚úÖ Tr·∫≠n xu·∫•t hi·ªán trong danh s√°ch

### TC03 - T·∫°o tr·∫≠n b√≥ng thi·∫øu th√¥ng tin
**M·ª•c ƒë√≠ch:** Ki·ªÉm tra validation khi thi·∫øu th√¥ng tin b·∫Øt bu·ªôc.

**Logic:**
1. Navigate ƒë·∫øn create page
2. Kh√¥ng ƒëi·ªÅn b·∫•t k·ª≥ th√¥ng tin n√†o (ƒë·ªÉ tr·ªëng form)
3. Click "T·∫°o tr·∫≠n ƒë·∫•u"
4. Verify hi·ªÉn th·ªã c√°c l·ªói cho c√°c tr∆∞·ªùng b·∫Øt bu·ªôc:
   - Ph·∫£i c√≥ √≠t nh·∫•t 2 error messages
   - C√≥ th√¥ng b√°o v·ªÅ "c√¢u l·∫°c b·ªô" ho·∫∑c "club"
   - C√≥ th√¥ng b√°o v·ªÅ "s√¢n" ho·∫∑c "stadium"

```javascript
test('TC03 - T·∫°o tr·∫≠n b√≥ng thi·∫øu th√¥ng tin - Ki·ªÉm tra th√¥ng b√°o l·ªói khi thi·∫øu d·ªØ li·ªáu', async () => {
  // Navigate to create page
  await matchingPage.navigateToCreatePage();
  
  // 1. Kh√¥ng ƒëi·ªÅn b·∫•t k·ª≥ th√¥ng tin n√†o (ƒë·ªÉ tr·ªëng form)
  // 2. Nh·∫•n "T·∫°o tr·∫≠n ƒë·∫•u" tr·ª±c ti·∫øp
  await matchingPage.clickSubmitButton();
  
  // 3. Verify: Hi·ªÉn th·ªã c√°c l·ªói cho c√°c tr∆∞·ªùng b·∫Øt bu·ªôc
  const errorMessages = await matchingPage.getAllErrorMessages();
  console.log('‚úÖ Error messages found:', errorMessages);
  
  // Verify: Ph·∫£i c√≥ √≠t nh·∫•t 2 error messages (cho club v√† stadium - 2 tr∆∞·ªùng required)
  expect(errorMessages.length).toBeGreaterThanOrEqual(2);
  
  // Verify: C√≥ th√¥ng b√°o v·ªÅ c√¢u l·∫°c b·ªô
  const hasClubError = errorMessages.some(msg => 
    msg.toLowerCase().includes('c√¢u l·∫°c b·ªô') || msg.toLowerCase().includes('club')
  );
  expect(hasClubError).toBeTruthy();
  
  // Verify: C√≥ th√¥ng b√°o v·ªÅ s√¢n b√≥ng
  const hasStadiumError = errorMessages.some(msg => 
    msg.toLowerCase().includes('s√¢n') || msg.toLowerCase().includes('stadium')
  );
  expect(hasStadiumError).toBeTruthy();
});
```

**Expectations:**
- ‚úÖ Hi·ªÉn th·ªã √≠t nh·∫•t 2 error messages
- ‚úÖ C√≥ error v·ªÅ "c√¢u l·∫°c b·ªô/club"
- ‚úÖ C√≥ error v·ªÅ "s√¢n/stadium"

**Required fields:** Club, Stadium

### TC04 - Qu·∫£n l√Ω tr·∫≠n b√≥ng
**M·ª•c ƒë√≠ch:** Ki·ªÉm tra trang qu·∫£n l√Ω tr·∫≠n b√≥ng hi·ªÉn th·ªã danh s√°ch tr·∫≠n ƒë√£ t·∫°o.

**Logic:**
1. Navigate ƒë·∫øn manage page
2. Verify trang "Qu·∫£n l√Ω tr·∫≠n b√≥ng c·ªßa b·∫°n" hi·ªÉn th·ªã
3. Verify hi·ªÉn th·ªã danh s√°ch tr·∫≠n trong table
4. Verify c√≥ n√∫t "H·ªßy tr·∫≠n" (n·∫øu c√≥ tr·∫≠n)
5. Verify c√≥ th·ªÉ ƒë·ªçc th√¥ng tin tr·∫≠n ƒë·∫ßu ti√™n

```javascript
test('TC04 - Qu·∫£n l√Ω tr·∫≠n b√≥ng - Ki·ªÉm tra danh s√°ch tr·∫≠n ƒë√£ t·∫°o', async () => {
  // 1. Navigate to manage page
  await matchingPage.navigateToManagePage();
  
  // 2. Verify: Trang "Qu·∫£n l√Ω tr·∫≠n b√≥ng c·ªßa b·∫°n" hi·ªÉn th·ªã
  const isManagePageDisplayed = await matchingPage.isManagePageDisplayed();
  expect(isManagePageDisplayed).toBeTruthy();
  console.log('‚úÖ Manage page displayed with title "Qu·∫£n l√Ω tr·∫≠n b√≥ng c·ªßa b·∫°n"');
  
  // 3. Verify: Hi·ªÉn th·ªã danh s√°ch tr·∫≠n trong table
  const matchCount = await matchingPage.getMatchCount();
  console.log(`‚úÖ Found ${matchCount} matches in table`);
  expect(matchCount).toBeGreaterThanOrEqual(0); // C√≥ th·ªÉ c√≥ ho·∫∑c kh√¥ng c√≥ tr·∫≠n n√†o
  
  // 4. Verify: C√≥ n√∫t "H·ªßy tr·∫≠n" (n·∫øu c√≥ tr·∫≠n)
  if (matchCount > 0) {
    const hasCancelBtn = await matchingPage.hasCancelButton();
    expect(hasCancelBtn).toBeTruthy();
    console.log('‚úÖ Cancel button is available for managing matches');
    
    // 5. Verify: C√≥ th·ªÉ ƒë·ªçc th√¥ng tin tr·∫≠n ƒë·∫ßu ti√™n
    const firstMatchInfo = await matchingPage.getMatchInfoAtRow(0);
    expect(firstMatchInfo).not.toBeNull();
    expect(firstMatchInfo.teamName).toBeTruthy();
    expect(firstMatchInfo.stadium).toBeTruthy();
    expect(firstMatchInfo.time).toBeTruthy();
    console.log('‚úÖ First match info:', firstMatchInfo);
  }
});
```

**Expectations:**
- ‚úÖ Trang "Qu·∫£n l√Ω tr·∫≠n b√≥ng c·ªßa b·∫°n" hi·ªÉn th·ªã
- ‚úÖ Table hi·ªÉn th·ªã danh s√°ch tr·∫≠n (‚â• 0 tr·∫≠n)
- ‚úÖ C√≥ n√∫t "H·ªßy tr·∫≠n" n·∫øu c√≥ tr·∫≠n
- ‚úÖ C√≥ th·ªÉ ƒë·ªçc th√¥ng tin tr·∫≠n (teamName, stadium, time)

## üìä Test Data

### Valid Match Data
```javascript
MATCHING_TEST_DATA.VALID_MATCH = {
  club: 'Arsenal FC',
  stadium: 'S√¢n V·∫≠n ƒê·ªông A',
  date: '2025-12-31',
  time: '14:00',
  contactNumber: '0912345678',
  description: 'Tr·∫≠n giao h·ªØu cu·ªëi tu·∫ßn'
}

MATCHING_TEST_DATA.STADIUMS = {
  SVD_A: 'S√¢n V·∫≠n ƒê·ªông A',
  SVD_B: 'S√¢n V·∫≠n ƒê·ªông B'
}
```

## üí° Best Practices

### 1. Wait after dropdown selection
```javascript
// Good
await this.page.click(this.selectors.clubSelect);
await this.page.waitForTimeout(500); // ƒê·ª£i dropdown m·ªü
await this.page.click(`${this.selectors.clubSelectOption}:has-text("${clubName}")`);
await this.page.waitForTimeout(300); // ƒê·ª£i selection apply

// Bad
await this.page.click(this.selectors.clubSelect);
await this.page.click(`${this.selectors.clubSelectOption}:has-text("${clubName}")`); // C√≥ th·ªÉ fail
```

### 2. Flexible success verification
```javascript
// Good - Ch·∫•p nh·∫≠n c·∫£ success message v√† redirect
const currentUrl = page.url();
const isSuccess = currentUrl.includes('/matching') || 
                 (await matchingPage.getSuccessMessage()) !== null;
expect(isSuccess).toBeTruthy();

// Bad - Too strict
const successMessage = await matchingPage.getSuccessMessage();
expect(successMessage).toBe('T·∫°o tr·∫≠n th√†nh c√¥ng'); // C√≥ th·ªÉ fail n·∫øu redirect
```

### 3. Filter error messages properly
```javascript
// Good - Filter messages length > 5
if (text && text.trim() && text.trim().length > 5) {
  messages.push(text.trim());
}

// Bad - L·∫•y t·∫•t c·∫£ (bao g·ªìm placeholder, label)
messages.push(await element.textContent());
```

## üîç Common Issues

### Issue 1: Dropdown kh√¥ng ch·ªçn ƒë∆∞·ª£c
**Nguy√™n nh√¢n:** Kh√¥ng ƒë·ª£i dropdown m·ªü.  
**Gi·∫£i ph√°p:**
```javascript
await this.page.click(this.selectors.clubSelect);
await this.page.waitForTimeout(500);
await this.page.click(`${this.selectors.clubSelectOption}:has-text("${clubName}")`);
```

### Issue 2: Error messages kh√¥ng ƒë·∫ßy ƒë·ªß
**Nguy√™n nh√¢n:** L·∫•y lu√¥n placeholder/label.  
**Gi·∫£i ph√°p:** Filter messages c√≥ length > 5.

### Issue 3: Manage page kh√¥ng c√≥ matches
**Nguy√™n nh√¢n:** Ch∆∞a t·∫°o tr·∫≠n n√†o.  
**Gi·∫£i ph√°p:** Test accept matchCount >= 0.

## üìö Related Documentation

- [Test Data](../src/test-data/matching.test-data.js)
- [Selectors](../src/constants/selectors.js)
- [Routes](../src/constants/routes.js)

---

**Total Test Cases:** 4  
**Coverage:** Form Display, Create Match (valid/validation), Manage Matches  
**Last Updated:** October 2025

